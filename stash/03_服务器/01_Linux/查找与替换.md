---
title: 查找与替换
---
### 查找文件中是否包含 xxx 内容

```
grep “被查找的字符串” 文件名
```

### 需要返回这个内容在第几行

```
grep -n “被查找的字符串” 文件名
```

### 只返回行号

- -f1 指的是获取截取内容的第一部分

- -d: 表示按照冒号来截取

```
grep -n “被查找的字符串” 文件名 | cut -f1 -d:
```

### 查找第几行之后的内容

> 没有找到 grep 怎么用，结合 sed 的截取实现

- 通过 sed 命令找行号之后的内容

  ```
  sed -n '10,20p' test/01_achieve.md | grep -n "## 初始化"
  ```

  表示：找到 test/01_achieve.md 文件的10 至20 行，并且含有`## 初始化`内容

### 只返回完全符合正则的内容

```
grep -o '正则' filename
```

## 替换

### 语法格式

```
sed -i "s/原字符串/新字符串/g" `grep 原字符串 -rl 所在目录`
```

在 macOS 中 sed 命令用起来有很多问题，使用 gsed

1. 安装 gsed

   ```
   npm install gsed
   ```

2. 语法同 sed 语法，将 sed 替换成 gsed 即可。

- Linux sed命令： [http://www.runoob.com/linux/linux-comm-sed.html](https://www.runoob.com/linux/linux-comm-sed.html)
- Linux grep命令：[http://www.runoob.com/linux/linux-comm-grep.html](https://www.runoob.com/linux/linux-comm-grep.html)

### 替换整行

- 替换第一行为 Hi

```
sed '1c Hi' filename
```

- 替换第一行到第二行为Hi

```
sed '1,2c Hi' filename
```

## 替换指定行的指定内容

- 在 s 前添加行号

- 在参数 s 前还可以添加内容，该内容指的是包含什么什么内容的行

举例：

```
sed -i '3s/aaa/fff/' file`                --表示针对file文件中的第三行，将其中的aaa替换为fff

`sed -i '/xxx/s/aaa/fff/g' file`    --表示针对文件，找出包含xxx的行，并将其中的aaa替换为fff

`sed -i '1s/[#*]/fff/gp' file`    --表示针对文件第1行，将其中的#号或是*号替换为fff
```
