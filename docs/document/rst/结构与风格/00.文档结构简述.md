---
title: 文档结构简述
---

## 写在前面

阅读这篇文档前需要注意的有：

1. 文章面向群体为**文档编写人员**而非文档阅读者。
2. 在阅读文章前需要对**`rst`写作语法**有一定程度了解。
3. 文章简单介绍了构建文档的**目录结构**而非文档风格，关于文档的编写风格可以查看文档:《文档规范》。

## 技术栈

1. rst
2. sphinx

> 以上内容不在此进行赘述。

## 文档结构

文档的两级目录结构如下。

> 1. `build`为文档的生成目录，生成的html会在这个文件夹下。
> 2. `source`为文档的资源文件夹，我们需要在该文件夹下编写文档。
>
> 后续文章主要就`source`文件夹下内容进行介绍。

```
.
├── Makefile
├── build
│   ├── doctrees
│   └── html
├── make.bat
└── source
    ├── 00_product
    ├── 01_基础功能集成
    ├── 02_通话管理
    ├── 03_音频管理
    ├── 04_视频管理
    ├── 05_频道管理
    ├── 06_会话管理
    ├── 07_消息管理
    ├── 08_群组管理
    ├── 91_产品概述
    ├── 92_Demo体验
    ├── 93_下载
    ├── 94_运行Demo源码
    ├── 95_版本控制
    ├── 96_错误码
    ├── 97_常见问题
    ├── 98_词汇表
    ├── 99_API
    ├── README.md
    ├── _static
    ├── _templates
    ├── conf.py
    ├── images
    └── index.rst
```

`source`目录下主要分为四个部分：

1. index.rst —— 相当于文档大纲的入口。
2. 总纲(`00_product`) —— 用于控制文档的总结构。
3. 文章内容(`01_基础功能集成` 至 `99_API`) —— 这里的文章将通过`include`语法被总目录引用。
4. 图片(images) —— 文章中引用的图片。

`source`目录可以理解为：

```
.
├── index.rst
├── 总纲
│   ├── 总纲内容
│   └── index.rst
├── 文章内容
└── 图片
```



### index.rst	

`source` 目录下的`index.rst`是`Sphinx`初始化文档时自动生成的文件，作为文档的入口存在。

```rst
文档中心
===========

.. toctree::
   :titlesonly:

   一对一语音通话</00_product/00_o2o_audio/index>
   一对一视频通话</00_product/01_o2o_video/index>
   多方语音通话</00_product/02_mult_audio/index>
   多方视频通话</00_product/03_mult_video/index>
   语音互动直播</00_product/04_audio_live/index>
   视频互动直播</00_product/05_video_live/index>
   WebRTC</00_product/06_video_live/index>
   IM</00_product/06IM/index>
   智能硬件</00_product/07智能硬件/index>
```

以一对一语音通话为例:

```rst
一对一语音通话</00_product/00_o2o_audio/index>
```

而该路径下的`index.rst`文件将继续指向下一个文件。

最终将指向具体的文章。以`source/00_product/00_o2o_audio/Android/index.rst`路径下的index文件为例：

```rst
.. toctree::
   :titlesonly:

   产品概述<00_overview>
```

其含义为：`产品概述`指向了同级目录下的`00_overview`文件，`00_overview`文件内容如下:

```rst
.. 
    一对一语音产品概述
    -----

.. include:: /91_产品概述/00_一对一语音产品概述.rst
```

其含义为：通过`include`语法引用了`91_产品概述`文件夹下的`00_一对一语音产品概述.rst`文档。



通过上述方式，实现了：

1. 文档结构和文章内容的解耦

2. 目录和标题的区分

   

### 文章内容

`文章内容`包含了由序号 [01] 至序号 [99] 的所有内容。其中：

1. [01] 文件夹下内容为**基础功能集成**，包含了实现该产品的基础功能必须的步骤。

   **基础功能**包括`集成SDK`->`登录`->`实现基本功能`三个主要步骤。

   > 注：第三个步骤在一对一中称为：`实现一对一视频通话`，多方中称为：`实现多方视频通话`，其他产品同理

   根据产品的不同，`实现基本功能`的内容也不尽相同，但文章内仍然存在大量重复内容，故将重复内容封装在`common`中。以Android部分为例，重复内容文件存放路径为：

   ```
   source/01_基础功能集成/Android/common/
   ```

   这部分内容通过`include`语法被引用至`实现基本功能`的文章中。

   因此，`实现基本功能`的完整文章内容如下：

   ```rst
   .. _实现多方视频通话(Android):
   
   .. include:: /98_词汇表/substitution_Android.rst
   
   .. highlight:: java
   
   实现多方视频通话
   ------------------------    
   
   .. contents:: 目录
   
   .. 时序图
   
   本章将介绍如何实现多方视频通话，多方视频通话的 API 调用时序见下图：
   
   .. image:: /images/多方/multivideojoin.png
   
   .. image:: /images/多方/leavechannel.png
   
   .. image:: /images/多方/stopchannel.png
   
   .. 二级内容，通过include语法引用下一级的文件。引用文件统一使用绝对路径而非相对路径。
   
   .. include:: /01_基础功能集成/Android/common/多方_初始化.rst
   
   .. include:: /01_基础功能集成/Android/common/多方_视频_加入频道.rst
   
   .. include:: /01_基础功能集成/Android/common/多方_创建本地视频画面.rst
   
   .. include:: /01_基础功能集成/Android/common/多方_创建远端视频画面.rst
   
   .. include:: /01_基础功能集成/Android/common/多方_离开频道.rst
   
   .. include:: /01_基础功能集成/Android/common/多方_销毁本地和远端视频画面.rst
   
   .. include:: /01_基础功能集成/Android/common/多方_解散频道.rst
   ```

2. [02] - [08] 为**进阶功能集成**，包含了几乎所有接口的调用方式，按各个功能模块划分。

   **进阶功能集合**包括`通话`、`音频`、`视频`等七个模块。其文件结构如下（仅展开Andorid部分，其他平台结构相同）：

   ```
   ├── 01_基础功能集成
   │   ├── 00_Reference.rst
   │   ├── Android
   │   │   ├── 00_集成SDK.rst
   │   │   ├── 02_初始化_废除.rst
   │   │   ├── 03_登录.rst
   │   │   ├── 04_实现多方视频通话.rst
   │   │   ├── 04_实现多方语音通话.rst
   │   │   ├── 04_实现视频互动直播.rst
   │   │   ├── 04_实现语音互动直播.rst
   │   │   ├── 04_实现一对一视频通话.rst
   │   │   ├── 04_实现一对一语音通话.rst
   │   │   ├── 05_推送.rst
   │   │   └── common
   │   │       ├── 多方_视频_加入频道.rst
   │   │       ├── 多方_语音_加入频道.rst
   │   │       ├── 多方_初始化.rst
   │   │       ├── 多方_离开频道.rst
   │   │       ├── 多方_解散频道.rst
   │   │       ├── 直播_角色设置.rst
   │   │       ├── 多方_创建本地视频画面.rst
   │   │       ├── 多方_创建远端视频画面.rst
   │   │       └── 多方_销毁本地和远端视频画面.rst
   │   ├── Windows
   │   ├── iOS
   │   └── macOS
   ├── 02_通话管理
   │   ├── 00.通话状态更新.rst
   │   ├── Android
   │   │   ├── 00_通话状态通知（待定）.rst
   │   │   ├── 01_通话过程管理.rst
   │   │   └── 03_通话人数设置.rst
   │   ├── Windows
   │   ├── iOS
   │   └── macOS
   ├── 03_音频管理
   │   ├── Android
   │   │   ├── 00_音频数据管理.rst
   │   │   └── 01_音频设备管理.rst
   │   ├── Windows
   │   ├── iOS
   │   └── macOS
   ├── 04_视频管理
   │   ├── Android
   │   │   ├── 00_视频数据采集管理.rst
   │   │   ├── 01_视频渲染管理.rst
   │   │   └── 02_视频设备管理.rst
   │   ├── Windows
   │   ├── iOS
   │   └── macOS
   ├── 05_频道管理
   │   ├── Android
   │   │   ├── 00_频道信息管理.rst
   │   │   └── 01_频道成员管理.rst
   │   ├── Windows
   │   ├── iOS
   │   └── macOS
   ├── 06_会话管理
   │   └── index.rst
   ├── 07_消息管理
   │   └── index.rst
   ├── 08_群组管理
   │   └── index.rst
   ```

   注：其中`会话管理`、`消息管理`、`群组管理`等为IM部分内容，内容待定。

3. 中间空余的序号为**后续扩展**准备。

   后续的模块内容将在此进行扩充。

4. [91] - [99] 部位为**非集成**部分内容。

   ```
   ├── 91_产品概述
   │   ├── 00_一对一语音产品概述.rst
   │   ├── 01_一对一视频产品概述.rst
   │   ├── 02_多方语音产品概述.rst
   │   ├── 03_多方视频产品概述.rst
   │   ├── 04_语音互动直播产品概述.rst
   │   └── 05_视频互动直播产品概述.rst
   ├── 92_Demo体验
   │   └── 00_一对一demo体验.rst
   ├── 93_下载
   │   ├── 00_下载SDK.rst
   │   └── 02_下载Demo源码.rst
   ├── 94_运行Demo源码
   │   ├── 00_Demo源码_Android.rst
   │   ├── 00_Demo源码_Windows.rst
   │   ├── 00_Demo源码_iOS.rst
   │   └── 00_Demo源码_macOS.rst
   ├── 95_版本控制
   │   ├── Android
   │   │   └── 00_SDK更新日志.rst
   │   ├── Windows
   │   │   └── 00_SDK更新日志.rst
   │   ├── iOS
   │   │   └── 00_SDK更新日志.rst
   │   └── macOS
   │       └── 00_SDK更新日志.rst
   ├── 96_错误码
   │   ├── index.rst
   │   └── 错误码.rst
   ├── 97_常见问题
   │   ├── Android
   │   │   └── 00_常见问题.rst
   │   ├── Common
   │   │   └── 00_常见问题.rst
   │   ├── Windows
   │   ├── iOS
   │   │   └── 00_常见问题.rst
   │   ├── index.rst
   │   └── macOS
   ├── 98_词汇表
   │   └── 词汇表.rst
   ├── 99_API
   │   ├── Android
   │   │   ├── API_REFERENCE.rst
   │   │   └── substitution_Android.rst
   │   ├── Windows
   │   │   ├── API_REFERENCE.rst
   │   │   └── substitution_Windows.rst
   │   ├── iOS
   │   │   ├── API_REFERENCE.rst
   │   │   └── substitution_iOS.rst
   │   ├── index.rst
   │   └── macOS
   │       └── API_REFERENCE.rst
   ```
   `91_产品概述`：汇总所有产品的概述文章。

   `92_Demo体验`：demo体验

   `93_下载`：汇总有关下载的文章

   `94_运行Demo源码`：运行demo源码的文章

   `95_版本控制`：SDK 的更新日志，交由开发来编写该部分的内容，格式规范见《SDK更新日志规范》

   `96_错误码`：会显示给用户的错误码，改部分的内容未定。（现在未显示在toc中）

   `97_常见问题`：汇总各个品台的常见问题和共同存在的常见问题文章

   `98_词汇表`：词汇表包含了文章中的关键词如`心跳`，`AppKey`等

   `99_API`：包含了API链接文章--`API_REFERENCE.rst`（对外）和API替换文章--`substitution_iOS.rst`(对内用作替换文章内部链接)

### 图片

> 结构组成比较简单不再赘述。

`images`文件夹汇总了所有文档中的图片，在文章中通过绝对路径引用：

```rst
.. image:: /images/SDK集成/appcreate1.png
```



以上

