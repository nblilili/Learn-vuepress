(window.webpackJsonp=window.webpackJsonp||[]).push([[94],{317:function(e,n,a){e.exports=a.p+"assets/img/multiaudioworkflow.8b56096a.png"},425:function(e,n,a){"use strict";a.r(n);var r=a(43),t=Object(r.a)({},(function(){var e=this,n=e.$createElement,r=e._self._c||n;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"实现多方语音通话"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#实现多方语音通话"}},[e._v("#")]),e._v(" 实现多方语音通话")]),e._v(" "),r("p",[e._v("本章将介绍如何实现多方语音通话，多方语音通话的 API 调用时序见下图：")]),e._v(" "),r("p",[r("img",{attrs:{src:a(317),alt:"../../../../_images/multiaudioworkflow.png"}})]),e._v(" "),r("h2",{attrs:{id:"初始化"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#初始化"}},[e._v("#")]),e._v(" 初始化")]),e._v(" "),r("p",[e._v("调用\n"),r("a",{attrs:{href:"https://developer.juphoon.com/portal/reference/V2.1/windows/html/cb59bc27-6528-9dbf-c996-de857096f847.htm",target:"_blank",rel:"noopener noreferrer"}},[e._v("JCMediaDevice.create()"),r("OutboundLink")],1),e._v("\n和\n"),r("a",{attrs:{href:"https://developer.juphoon.com/portal/reference/V2.1/windows/html/03ba7506-bd05-93a0-ddd6-605eea7c7ee6.htm",target:"_blank",rel:"noopener noreferrer"}},[e._v("JCMediaChannel.create()"),r("OutboundLink")],1),e._v("\n以初始化实现多方通话需要的模块：:")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[e._v("/// 新建类并实现\nclass JCManager : JCClientCallback, JCMediaDeviceCallback,JCMediaChannelCallbac{\n\n    #region JCMediaDeviceCallback\n\n    public void onCameraUpdate(){...}\n\n    public void onAudioOutputTypeChange(string audioOutputType){...}\n\n    #endregion\n\n    #region JCMediaChannelCallback\n    ...\n    /// 实现 JCMediaChannelCallback 中的方法\n    ...\n    #endregion\n\n    /// 声明对象\n    JCMediaDevice mMediaDevice;\n    JCMediaChannel mMediaChannel;\n\n    /// 初始化函数\n    public bool initialize(Context context) {\n\n        /// 1. 媒体类\n        mMediaDevice = JCMediaDevice.create(mClient, this);\n        /// 2. 媒体通道类\n        mMediaChannel = JCMediaChannel.create(client, mediaDevice, this);\n    }\n}\n")])])]),r("h2",{attrs:{id:"加入频道"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#加入频道"}},[e._v("#")]),e._v(" 加入频道")]),e._v(" "),r("ol",[r("li",[r("p",[e._v("调用\n"),r("a",{attrs:{href:"https://developer.juphoon.com/portal/reference/V2.1/windows/html/70f2d136-ebf6-12fc-eb1e-2a90622caca7.htm",target:"_blank",rel:"noopener noreferrer"}},[e._v("enableUploadAudioStream()"),r("OutboundLink")],1),e._v("\n开启音频流。")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[e._v("/// 1. 开启音频流\nmMediaDeviceChannel.enableUploadAudioStream(true);\n")])])])]),e._v(" "),r("li",[r("p",[e._v("创建并加入频道，需要传入 "),r("code",[e._v("channelIdOrUri")]),e._v(" 和\n"),r("a",{attrs:{href:"https://developer.juphoon.com/portal/reference/V2.1/windows/html/af4ac634-bbe3-76e3-d1f8-120213ef2fff.htm",target:"_blank",rel:"noopener noreferrer"}},[e._v("JCMediaChannel.JoinParam"),r("OutboundLink")],1),e._v("\n。")]),e._v(" "),r("blockquote",[r("ul",[r("li",[r("p",[r("code",[e._v("channelIdOrUri")]),e._v(" 表示频道 ID 或频道 Uri。")])]),e._v(" "),r("li",[r("p",[r("code",[e._v("JCMediaChannelJoinParam")]),e._v(" 中 "),r("code",[e._v("uriMode")]),e._v(" 参数设置为 true 时表示传入频道\nUri，设置其他参数时表示传入频道 ID。传入相同的频道 ID 或相同的频道 Uri 的用户会进入同一个频道。")]),e._v(" "),r("p",[e._v('mMediaChannel.join("222", null);')])])])])]),e._v(" "),r("li",[r("p",[e._v("加入频道后收到\n"),r("a",{attrs:{href:"https://developer.juphoon.com/portal/reference/V2.1/windows/html/535cbae7-841e-ca31-32ea-87c1a840eff1.htm",target:"_blank",rel:"noopener noreferrer"}},[e._v("onJoin()"),r("OutboundLink")],1),e._v("\n回调。")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[e._v("public void onJoin(bool result, JCMediaChannelReason reason, String channelId) {\n    if (result) {\n        /// 加入频道成功\n    } else {\n        /// 加入频道失败\n    }\n}\n")])])])])]),e._v(" "),r("h2",{attrs:{id:"离开频道"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#离开频道"}},[e._v("#")]),e._v(" 离开频道")]),e._v(" "),r("p",[e._v("调用\n"),r("a",{attrs:{href:"https://developer.juphoon.com/portal/reference/V2.1/windows/html/7f034b94-15ee-8d49-48e3-905fff27f31f.htm",target:"_blank",rel:"noopener noreferrer"}},[e._v("leave()"),r("OutboundLink")],1),e._v("\n方法可以离开当前频道。")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[e._v("mMediaChannel.leave();\n")])])]),r("p",[e._v("离开频道后，自身收到\n"),r("a",{attrs:{href:"https://developer.juphoon.com/portal/reference/V2.1/windows/html/f356aba3-ebed-a72c-4e34-02a684925a15.htm",target:"_blank",rel:"noopener noreferrer"}},[e._v("onLeave()"),r("OutboundLink")],1),e._v("\n回调，其他成员同时收到\n"),r("a",{attrs:{href:"https://developer.juphoon.com/portal/reference/V2.1/windows/html/89a35b12-8c2c-247d-e90c-ebe04f3e4521.htm",target:"_blank",rel:"noopener noreferrer"}},[e._v("onParticipantLeft()"),r("OutboundLink")],1),e._v("\n回调")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[e._v("/// 离开频道结果回调\n\npublic void onLeave(JCMediaChannelReason reason, String channelId) {\n    ...\n}\n")])])]),r("h2",{attrs:{id:"解散频道"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#解散频道"}},[e._v("#")]),e._v(" 解散频道")]),e._v(" "),r("p",[e._v("如果想解散频道，可以调用下面的接口，此时所有成员都将被退出。")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[e._v("/// 结束频道\nmMediaChannel.stop();\n")])])]),r("p",[e._v("解散频道后，发起结束的成员收到\n"),r("a",{attrs:{href:"https://developer.juphoon.com/portal/reference/V2.1/windows/html/d3732af7-2770-2d00-e4cb-e8f658da6c48.htm",target:"_blank",rel:"noopener noreferrer"}},[e._v("onStop()"),r("OutboundLink")],1),e._v("\n回调，其他成员同时收到\n"),r("a",{attrs:{href:"https://developer.juphoon.com/portal/reference/V2.1/windows/html/f356aba3-ebed-a72c-4e34-02a684925a15.htm",target:"_blank",rel:"noopener noreferrer"}},[e._v("onLeave()"),r("OutboundLink")],1),e._v("\n回调。 解散失败原因枚举值请参考\n"),r("a",{attrs:{href:"https://developer.juphoon.com/portal/reference/V2.1/windows/html/4481d778-9d4d-43fe-f94d-fdfa690dd939.htm",target:"_blank",rel:"noopener noreferrer"}},[e._v("MediaChannelReason"),r("OutboundLink")],1),e._v("\n。")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[e._v("public void onStop(bool result, JCMediaChannelReason reason) {\n    ...\n}\n")])])])])}),[],!1,null,null,null);n.default=t.exports}}]);