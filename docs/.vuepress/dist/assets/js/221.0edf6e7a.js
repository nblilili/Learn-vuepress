(window.webpackJsonp=window.webpackJsonp||[]).push([[221],{592:function(e,a,n){"use strict";n.r(a);var t=n(43),r=Object(t.a)({},(function(){var e=this,a=e.$createElement,n=e._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h1",{attrs:{id:"频道管理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#频道管理"}},[e._v("#")]),e._v(" 频道管理")]),e._v(" "),n("h2",{attrs:{id:"频道信息查询"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#频道信息查询"}},[e._v("#")]),e._v(" 频道信息查询")]),e._v(" "),n("p",[e._v("调用\n"),n("a",{attrs:{href:"https://developer.juphoon.com/portal/reference/V2.1/windows/C++/html/class_j_c_media_channel.html#af7ccf465a6ddb05aa4ff22f5f61eab10",target:"_blank",rel:"noopener noreferrer"}},[e._v("query"),n("OutboundLink")],1),e._v("\n接口查询频道相关信息，例如频道名称、频道是否存在、成员名以及成员数")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[e._v('JCManager::shared()->mediaChannel->query("channelId");\n')])])]),n("p",[e._v("查询操作发起后，查询的结果通过\n"),n("a",{attrs:{href:"https://developer.juphoon.com/portal/reference/V2.1/windows/C++/html/class_j_c_media_channel_callback.html#a864db3251f12affc38f7c95c7fdccab1",target:"_blank",rel:"noopener noreferrer"}},[e._v("onQuery"),n("OutboundLink")],1),e._v("\n回调上报：")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[e._v("void JCManager::onQuery(int operationId, bool result, JCMediaChannelReason reason, JCMediaChannelQueryInfo* queryInfo)\n{\n    //查询结果\n    if (result) {\n        //查询到的 channelId\n        CString channelId = queryInfo->getChannelId();\n        //查询到的成员数\n        int number = queryInfo->getClientCount();\n    }\n}\n")])])]),n("hr"),e._v(" "),n("h2",{attrs:{id:"发送消息"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#发送消息"}},[e._v("#")]),e._v(" 发送消息")]),e._v(" "),n("p",[e._v("如果想在频道中给其他成员发送消息，可以调用\n"),n("a",{attrs:{href:"https://developer.juphoon.com/portal/reference/V2.1/windows/C++/html/class_j_c_media_channel.html#aa67711141ad0883ad8f2dce0ea631b48",target:"_blank",rel:"noopener noreferrer"}},[e._v("sendMessage"),n("OutboundLink")],1),e._v("\n方法")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[e._v('//最后一个参数为接收者 id，如果为空则会发给频道所有人员\nJCManager::shared()->mediaChannel->sendMessage(type, "消息内容", NULL);\n')])])]),n("p",[e._v("其中，type（消息类型）为自定义类型。例如 text、image、file 等类型，在对收到的消息进行解析时消息类型需要保持一致。")]),e._v(" "),n("p",[e._v("当频道中的其他成员收到消息时，会收到\n"),n("a",{attrs:{href:"https://developer.juphoon.com/portal/reference/V2.1/windows/C++/html/class_j_c_media_channel_callback.html#a6f6b72922ebc576d94f55dc153b1209d",target:"_blank",rel:"noopener noreferrer"}},[e._v("onMessageReceive"),n("OutboundLink")],1),e._v("\n回调")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[e._v('void JCManager::onMessageReceive(const char* type, const char* content, const char* fromUserId)\n{\n    std::stringstream s;\n    s << "收到Conf消息 " << fromUserId << " type:" << type << " content:" << JCTool::Utf8ToGB2312(content);\n}\n')])])]),n("h2",{attrs:{id:"频道成员管理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#频道成员管理"}},[e._v("#")]),e._v(" 频道成员管理")]),e._v(" "),n("h3",{attrs:{id:"获取频道成员"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#获取频道成员"}},[e._v("#")]),e._v(" 获取频道成员")]),e._v(" "),n("p",[e._v("调用\n"),n("a",{attrs:{href:"https://developer.juphoon.com/portal/reference/V2.1/windows/C++/html/class_j_c_media_channel.html#a0fd6477db77a60df91fa615b814ac796",target:"_blank",rel:"noopener noreferrer"}},[e._v("getParticipant"),n("OutboundLink")],1),e._v("\n方法，传入成员的 userId 获取频道成员对象")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[e._v("JCMediaChannelParticipant* participant = JCManager::shared()->mediaChannel->getParticipant(userId);\n")])])]),n("hr"),e._v(" "),n("h3",{attrs:{id:"获取频道所有成员对象"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#获取频道所有成员对象"}},[e._v("#")]),e._v(" 获取频道所有成员对象")]),e._v(" "),n("p",[e._v("调用\n"),n("a",{attrs:{href:"https://developer.juphoon.com/portal/reference/V2.1/windows/C++/html/class_j_c_media_channel.html#a3baccb9d05486fb20ff8d206284f609e",target:"_blank",rel:"noopener noreferrer"}},[e._v("getParticipants"),n("OutboundLink")],1),e._v("\n方法获取频道所有成员对象")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[e._v("std::list<JCMediaChannelParticipant*>* participants = JCManager::shared()->mediaChannel->getParticipants();\n")])])]),n("hr"),e._v(" "),n("h3",{attrs:{id:"踢出成员"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#踢出成员"}},[e._v("#")]),e._v(" 踢出成员")]),e._v(" "),n("p",[e._v("调用\n"),n("a",{attrs:{href:"https://developer.juphoon.com/portal/reference/V2.1/windows/C++/html/class_j_c_media_channel.html#aa5ee1e5334beb9ca63a8dc7110aaf6c0",target:"_blank",rel:"noopener noreferrer"}},[e._v("kick"),n("OutboundLink")],1),e._v("\n方法将成员踢出会议")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[e._v("//获取成员对象\nJCMediaChannelParticipant* participant = JCManager::shared()->mediaChannel->getParticipant(userId);\n//踢除成员\nJCManager::shared()->mediaChannel->kick(participant);\n")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);