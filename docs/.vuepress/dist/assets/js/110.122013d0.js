(window.webpackJsonp=window.webpackJsonp||[]).push([[110],{313:function(a,e,s){a.exports=s.p+"assets/img/rotateset.2711a380.png"},445:function(a,e,s){"use strict";s.r(e);var r=s(43),t=Object(r.a)({},(function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[r("h1",{attrs:{id:"视频管理"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#视频管理"}},[a._v("#")]),a._v(" 视频管理")]),a._v(" "),r("h2",{attrs:{id:"视频数据采集管理"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#视频数据采集管理"}},[a._v("#")]),a._v(" 视频数据采集管理")]),a._v(" "),r("h3",{attrs:{id:"设置要开启的摄像头类型"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#设置要开启的摄像头类型"}},[a._v("#")]),a._v(" 设置要开启的摄像头类型")]),a._v(" "),r("p",[a._v("视频采集前，可以指定要开启的摄像头")]),a._v(" "),r("p",[a._v("首先，获取摄像头列表")]),a._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[a._v("/// <summary>\n/// 摄像头列表\n/// </summary>\npublic List<JCMediaDeviceCamera> cameras\n")])])]),r("p",[a._v("其中，JCMediaDeviceCamera 有以下几个变量")]),a._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[a._v("/// <summary>\n/// 名称\n/// </summary>\npublic string cameraName { get; internal set; }\n/// <summary>\n/// id\n/// </summary>\npublic string cameraId\n")])])]),r("p",[a._v("切换摄像头")]),a._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[a._v('/// <summary>\n/// 切换摄像头\n/// </summary>\n/// <param name="camera">要切换的摄像头</param>\n/// <returns>true为切换成功，false为切换失败</returns>\npublic bool switchCamera(JCMediaDeviceCamera camera)\n')])])]),r("p",[r("strong",[a._v("示例代码")])]),a._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[a._v("// 获取摄像头列表\nList<JCMediaDeviceCamera> cameraDevices = mediaDevice.cameraDevices;\n\n// 切换摄像头\nmediaDevice.switchCamera(mediaDevice.cameras[0]);\n")])])]),r("h3",{attrs:{id:"设置摄像头采集分辨率"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#设置摄像头采集分辨率"}},[a._v("#")]),a._v(" 设置摄像头采集分辨率")]),a._v(" "),r("p",[a._v("您可以通过自定义摄像头采集参数实现不同的视频分辨率，如采集的高度、宽度和帧速率。")]),a._v(" "),r("p",[a._v("摄像头采集属性设置接口如下：")]),a._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[a._v('/// <summary>\n/// 设定摄像头分辨率，请在调用startCamera()接口之前调用才会生效\n/// </summary>\n/// <param name="width">摄像头分辨率宽</param>\n/// <param name="height">摄像头分辨率高</param>\n/// <param name="framerate">帧速率</param>\npublic void setCameraProperty(int width, int height, int framerate)\n')])])]),r("p",[r("strong",[a._v("示例代码")])]),a._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[a._v("// 设置摄像头采集属性\nmediaDevice.setCameraProperty(640, 360, 30);\n")])])]),r("h3",{attrs:{id:"设置-canvas-旋转角度"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#设置-canvas-旋转角度"}},[a._v("#")]),a._v(" 设置 Canvas 旋转角度")]),a._v(" "),r("p",[a._v("如果想设置Canvas中画布的角度，需要调用 JCMediaDeviceVideoCanvas 类中的 rotate 接口")]),a._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[a._v('/// <summary>\n/// 旋转画面\n/// </summary>\n/// <param name="angle">旋转角度</param>\npublic void rotate(JCMediaDeviceVideoCanvasRoatate angle)\n')])])]),r("p",[a._v("其中，角度需为 90 的倍数。调用该接口后，本端显示的本地视频画面和远端视频画面会同时旋转相同的角度，而对端显示的画面不受影响。")]),a._v(" "),r("p",[a._v("例如 A 设置旋转 90 度，则 A 端显示的 A 和 B 视频画面会同时旋转 90 度。而 B 端的视频画面则不会发生任何改变。如下图所示：")]),a._v(" "),r("p",[r("img",{attrs:{src:s(313),alt:"../../../../_images/rotateset.png"}})]),a._v(" "),r("p",[a._v("JCMediaDeviceVideoCanvasRoatate 枚举值如下")]),a._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[a._v("/// <summary>\n/// 0\n/// </summary>\nAngle0 = 0,\n/// <summary>\n/// 90\n/// </summary>\nAngle90 = 90,\n/// <summary>\n/// 180\n/// </summary>\nAngle180 = 180,\n/// <summary>\n/// 270\n/// </summary>\nAngle270 = 270\n")])])]),r("p",[r("strong",[a._v("示例代码")])]),a._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[a._v("// 设置摄像头采集属性\nmediaDevice.rotate(JCMediaDeviceVideoCanvasRoatate.Angle0);\n")])])]),r("h2",{attrs:{id:"视频渲染管理"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#视频渲染管理"}},[a._v("#")]),a._v(" 视频渲染管理")]),a._v(" "),r("h3",{attrs:{id:"创建本地和远端视频画面"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#创建本地和远端视频画面"}},[a._v("#")]),a._v(" 创建本地和远端视频画面")]),a._v(" "),r("ul",[r("li",[a._v("本地视频渲染")])]),a._v(" "),r("p",[a._v("进行视频渲染前可通过\n"),r("RouterLink",{attrs:{to:"/04_视频管理/Windows/00_视频数据采集管理.html#id3"}},[r("span",{staticClass:"std std-ref"},[a._v("获取摄像头列表")])]),a._v("\n接口获取摄像头列表。")],1),a._v(" "),r("p",[a._v("本地视频渲染通过调用 startCameraVideo 接口获得本地视频对象用于 UI 界面显示，"),r("strong",[a._v("该接口会打开摄像头")])]),a._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[a._v('/// <summary>\n/// 获取预览视频对象，通过此对象能获得视图用于UI显示\n/// </summary>\n/// <param name="mode">渲染方式</param>\n/// <returns>JCMediaDeviceVideoCanvas对象</returns>\npublic JCMediaDeviceVideoCanvas startCameraVideo(JCMediaDeviceRenderMode mode)\n')])])]),r("p",[a._v("其中，渲染模式（JCMediaDeviceRenderMode)有以下三种")]),a._v(" "),r("table",[r("colgroup",[r("col",{staticStyle:{width:"50%"}}),a._v(" "),r("col",{staticStyle:{width:"50%"}})]),a._v(" "),r("thead",[r("tr",{staticClass:"header"},[r("th",[r("p",[a._v("名称")])]),a._v(" "),r("th",[r("p",[a._v("描述")])])])]),a._v(" "),r("tbody",[r("tr",{staticClass:"odd"},[r("td",[r("p",[a._v("FULLSCREEN")])]),a._v(" "),r("td",[r("p",[a._v("铺满窗口")])])]),a._v(" "),r("tr",{staticClass:"even"},[r("td",[r("p",[a._v("FULLCONTENT")])]),a._v(" "),r("td",[r("p",[a._v("全图像显示，会有黑边，但在窗口跟图像比例相同的情况下不会有黑边")])])]),a._v(" "),r("tr",{staticClass:"odd"},[r("td",[r("p",[a._v("AUTO")])]),a._v(" "),r("td",[r("p",[a._v("自适应")])])])])]),a._v(" "),r("ul",[r("li",[a._v("远端视频渲染")])]),a._v(" "),r("p",[a._v("您可以调用 startVideo 方法获取对端视频对象并进行渲染")]),a._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[a._v('/// <summary>\n/// 获得视频对象，通过此对象能获得视图用于UI显示\n/// </summary>\n/// <param name="videoSource">渲染标识串，比如 JCMediaChannelParticipant JCCallItem 中的 renderId，当videoSource 为 videoFileId 时，内部会调用 startVideoFile</param>\n/// <param name="mode">渲染模式</param>\n/// <returns>JCMediaDeviceVideoCanvas对象</returns>\npublic JCMediaDeviceVideoCanvas startVideo(string videoSource, JCMediaDeviceRenderMode mode)\n')])])]),r("p",[r("strong",[a._v("示例代码")])]),a._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[a._v("// 获取摄像头列表\nList<JCMediaDeviceCamera> cameraDevices = mediaDevice.cameras;\n\n// 打开本地视频预览\nJCMediaDeviceVideoCanvas localCanvas = mediaDevice.startCameraVideo(JCMediaDeviceRenderMode.FULLCONTENT);\nImageBrush image = new ImageBrush(localCanvas.videoView);\nimage.Stretch = Stretch.Uniform;\nthis.label.Background = image;\n\n// 远端视频渲染，renderId来源于通话对象，一对一为JCCallItem对象，多方为JCMediaChannelParticipant对象\nJCMediaDeviceVideoCanvas remoteCanvas = mediaDevice.startVideo(renderId, JCMediaDeviceRenderMode.FULLSCREEN);\nImageBrush image = new ImageBrush(remoteCanvas.videoView);\nimage.Stretch = Stretch.Uniform;\nthis.label.Background = image;\n")])])]),r("hr"),a._v(" "),r("h3",{attrs:{id:"销毁本地和远端视频画面"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#销毁本地和远端视频画面"}},[a._v("#")]),a._v(" 销毁本地和远端视频画面")]),a._v(" "),r("p",[a._v("在视频通话结束或者视频通话中，如果想销毁视频画面，可以调用下面的接口")]),a._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[a._v('/// <summary>\n/// 停止视频\n/// </summary>\n/// <param name="canvas">JCMediaDeviceVideoCanvas对象，由startVideo获得</param>\npublic void stopVideo(JCMediaDeviceVideoCanvas canvas)\n')])])]),r("p",[a._v("示例代码:")]),a._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[a._v("JCMediaDeviceVideoCanvas localCanvas = mediaDevice.startCameraVideo(JCMediaDeviceRenderMode.FULLCONTENT);\nJCMediaDeviceVideoCanvas remoteCanvas = mediaDevice.startVideo(renderId, JCMediaDeviceRenderMode.FULLSCREEN);\nif (localCanvas != null)\n    {\n        this.smvideoGrid.Background = null;\n        mediaDevice.stopVideo(localCanvas);\n        localCanvas = null;\n    }\nif (remoteCanvas != null)\n    {\n        this.fullvideoGrid.Background = null;\n        mediaDevice.stopVideo(remoteCanvas);\n        remoteCanvas = null;\n    }\n")])])]),r("hr"),a._v(" "),r("h3",{attrs:{id:"视频通话截图"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#视频通话截图"}},[a._v("#")]),a._v(" 视频通话截图")]),a._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[a._v('/// <summary>\n/// 视频通话截图\n/// </summary>\n/// <param name="width">截屏宽度像素，-1为视频源像素</param>\n/// <param name="height">截屏高度像素，-1为视频源像素</param>\n/// <param name="filePath">文件路径</param>\n/// <returns>是否成功</returns>\npublic bool snapshot(int width, int height, string filePath)\n')])])]),r("hr"),a._v(" "),r("h3",{attrs:{id:"更新视频渲染标识"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#更新视频渲染标识"}},[a._v("#")]),a._v(" 更新视频渲染标识")]),a._v(" "),r("p",[a._v("如果想替换当前摄像头视频画面，可以调用下面的接口")]),a._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[a._v('/// <summary>\n/// 更新视频渲染标识\n/// </summary>\n/// <param name="videoSource">渲染标识</param>\n/// <returns>成功失败</returns>\npublic bool replace(string videoSource)\n')])])]),r("h3",{attrs:{id:"暂停渲染"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#暂停渲染"}},[a._v("#")]),a._v(" 暂停渲染")]),a._v(" "),r("p",[a._v("如果想暂停画面的渲染可以调用如下接口")]),a._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[a._v("/// <summary>\n/// 暂停渲染\n/// </summary>\n/// <returns>成功失败</returns>\npublic bool pause()\n")])])]),r("h3",{attrs:{id:"恢复渲染"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#恢复渲染"}},[a._v("#")]),a._v(" 恢复渲染")]),a._v(" "),r("p",[a._v("如果想对已暂停的画面继续进行渲染，可以调用下面的接口")]),a._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[a._v("/// <summary>\n/// 恢复渲染\n/// </summary>\n/// <returns>成功失败</returns>\npublic bool resume()\n")])])]),r("hr"),a._v(" "),r("h2",{attrs:{id:"视频设备管理"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#视频设备管理"}},[a._v("#")]),a._v(" 视频设备管理")]),a._v(" "),r("p",[a._v("视频设备管理主要用到 JCMediaDevice 类中的方法，具体如下：")]),a._v(" "),r("h3",{attrs:{id:"获取当前使用摄像头和默认摄像头"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#获取当前使用摄像头和默认摄像头"}},[a._v("#")]),a._v(" 获取当前使用摄像头和默认摄像头")]),a._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[a._v("/// <summary>\n/// 当前使用摄像头\n/// </summary>\npublic JCMediaDeviceCamera camera\n\n/// <summary>\n/// 默认摄像头\n/// </summary>\npublic JCMediaDeviceCamera defaultCamera\n")])])]),r("h3",{attrs:{id:"开启关闭摄像头"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#开启关闭摄像头"}},[a._v("#")]),a._v(" 开启关闭摄像头")]),a._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[a._v("/// <summary>\n/// 开启摄像头\n/// </summary>\n/// <returns>true为开启成功，false为开启失败</returns>\npublic bool startCamera()\n\n/// <summary>\n/// 关闭摄像头\n/// </summary>\n/// <returns>true为关闭成功，false为关闭失败</returns>\npublic bool stopCamera()\n")])])]),r("h3",{attrs:{id:"切换摄像头"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#切换摄像头"}},[a._v("#")]),a._v(" 切换摄像头")]),a._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[a._v('/// <summary>\n/// 切换摄像头\n/// </summary>\n/// <param name="camera">要切换的摄像头</param>\n/// <returns>true为切换成功，false为切换失败</returns>\npublic bool switchCamera(JCMediaDeviceCamera camera)\n')])])]),r("p",[r("strong",[a._v("示例代码")])]),a._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[a._v("// 打开摄像头\nmediaDevice.startCamera();\n\n// 关闭摄像头\nmediaDevice.stopCamera();\n\n// 切换摄像头\nmediaDevice.switchCamera(mediaDevice.cameras[0]);\n")])])])])}),[],!1,null,null,null);e.default=t.exports}}]);