(window.webpackJsonp=window.webpackJsonp||[]).push([[209],{382:function(t,a,e){t.exports=e.p+"assets/img/1-1workflowios.94880afd.png"},995:function(t,a,e){"use strict";e.r(a);var s=e(29),n=Object(s.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"realize-one-to-one-video-calling"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#realize-one-to-one-video-calling"}},[t._v("#")]),t._v(" Realize One-to-One Video Calling")]),t._v(" "),s("p",[t._v("This guide introduces how to achieve one-to-one video calling. API call\nsequence for one-to-one call is as shown below:")]),t._v(" "),s("p",[s("img",{attrs:{src:e(382),alt:"../../../../_images_en/1-1workflowios.png"}})]),t._v(" "),s("h2",{attrs:{id:"initialize"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#initialize"}},[t._v("#")]),t._v(" Initialize")]),t._v(" "),s("p",[t._v("Call "),s("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Classes/JCMediaDevice.html#//api/name/create:callback:"}},[t._v("JCMediaDevice\ncreate")]),t._v("\nand "),s("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Classes/JCCall.html#//api/name/create:mediaDevice:callback:"}},[t._v("JCCall\ncreate")]),t._v("\nto initialize the modules needed for one-to-one calling:")],1),t._v(" "),s("div",{staticClass:"language-objectivec extra-class"},[s("pre",{pre:!0,attrs:{class:"language-objectivec"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//Initialize")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("initialize "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1. Media class")]),t._v("\n    JCMediaDevice "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("mediaDevice "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("JCMediaDevice create"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("client callback"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2. Call class")]),t._v("\n    JCCall "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("call "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("JCCall create"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("client mediaDevice"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("mediaDevice callback"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" client"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" JCClientStateLogined"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("Among them:")]),t._v(" "),s("ul",[s("li",[t._v("The callback in the JCMediaDevice create is the proxy object of the\n"),s("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Protocols/JCMediaDeviceCallback.html"}},[t._v("JCMediaDeviceCallback")]),t._v("\nprotocol, which is used to notify the upper layer of media device\nrelated events. Therefore, you need to specify the proxy object of\ncallback first, and then implement the JCMediaDeviceCallback in the\nproxy object.")],1)]),t._v(" "),s("p",[t._v("The main methods in the JCMediaDeviceCallback are as follows:")]),t._v(" "),s("div",{staticClass:"language-objectivec extra-class"},[s("pre",{pre:!0,attrs:{class:"language-objectivec"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//Camera changes")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("onCameraUpdate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//Audio output changes")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("onAudioOutputTypeChange"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("NSString"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("audioOutputType"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//Sound interruption recovery")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("onAudioInerruptAndResume"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("BOOL"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("interrupt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("ul",[s("li",[t._v("The callback in the JCCall create is a proxy object of the\nJCCallCallback protocol, which is used to notify the upper layer of\nthe call-related events. Therefore, you need to specify the proxy\nobject of callback first, and then implement JCCallCallback in the\nproxy object.")])]),t._v(" "),s("p",[t._v("The main methods in the JCCallCallback are as follows:")]),t._v(" "),s("div",{staticClass:"language-objectivec extra-class"},[s("pre",{pre:!0,attrs:{class:"language-objectivec"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//This callback triggers when the callItem is added")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("onCallItemAdd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("JCCallItem"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" __nonnull"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//This callback triggers when the call is removed")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("onCallItemRemove"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("JCCallItem"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" __nonnull"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("item reason"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("JCCallReason"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("reason description"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("NSString "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" __nullable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("description"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//The callback of call status update (When the upper layer receives this callback, you can obtain all the information and status of the call according to the JCCallItem object, thereby updating the call related UI)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("onCallItemUpdate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("JCCallItem"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" __nonnull"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("item changeParam"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("JCCallChangeParam "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" __nullable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("changeParam"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"make-a-call"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#make-a-call"}},[t._v("#")]),t._v(" Make a call")]),t._v(" "),s("p",[t._v("To call\n"),s("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Classes/JCCall.html#//api/name/call:video:extraParam:"}},[t._v("call")]),t._v("\nto initiate a video call, the parameters to be filled are:")],1),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("userID")]),t._v(" Fill in the user ID of the other party.")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("video")]),t._v(" Select whether to call a video call, and true means to make\na video call, while false means to make a voice call.")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("extraParam")]),t._v(" is a custom pass-through string, which can be obtained\nthrough the extraParam property in the JCCallItem object.")])])]),t._v(" "),s("div",{staticClass:"language-objectivec extra-class"},[s("pre",{pre:!0,attrs:{class:"language-objectivec"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Initiate a video call")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("call call"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('@"userID"')]),t._v(" video"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("true extraParam"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('@"custom pass-through string"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("After dialing the call, both the caller and the callee will receive the\ncallback\n"),s("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Protocols/JCCallCallback.html#//api/name/onCallItemAdd:"}},[t._v("onCallItemAdd")]),t._v("\nfor the new call, and the call status will change to JCCallStatePending\nat this time. You can implement the\n"),s("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Protocols/JCCallCallback.html#//api/name/onCallItemAdd:"}},[t._v("onCallItemAdd")]),t._v("\nmethod in the upper layer and handle the related logic:")],1),t._v(" "),s("div",{staticClass:"language-objectivec extra-class"},[s("pre",{pre:!0,attrs:{class:"language-objectivec"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Receive a new call callback")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("onCallItemAdd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("JCCallItem"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" __nonnull"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("item "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Business logic")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("direction "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" JCCallDirectionIn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// If it is an incoming call")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// If it is an outgoing call")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("If the caller wants to cancel the call, he/she can go directly to the\nhang up part. After calling the hang up interface, the call status\nbecomes the JCCallStateCancel.")])]),t._v(" "),s("h2",{attrs:{id:"create-local-video-images"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#create-local-video-images"}},[t._v("#")]),t._v(" Create local video images")]),t._v(" "),s("p",[t._v("After initiating a call, call the\n"),s("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Classes/JCCallItem.html#//api/name/startSelfVideo:"}},[t._v("startSelfVideo")]),t._v("\nin the\n"),s("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Classes/JCCallItem.html"}},[t._v("JCCallItem")]),t._v("\nclass to create a local video image. This method returns a\n"),s("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Classes/JCMediaDeviceVideoCanvas.html"}},[t._v("JCMediaDeviceVideoCanvas")]),t._v("\nobject. This object is used to render the video to the canvas and manage\nthe rendering method. (Calling this method will open the camera):")],1),t._v(" "),s("div",{staticClass:"language-objectivec extra-class"},[s("pre",{pre:!0,attrs:{class:"language-objectivec"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("onCallItemAdd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("JCCallItem"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" __nonnull"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("item "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" JCCallStateTalking "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" localCanvas "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" nil "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("uploadVideoStreamSelf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Create local and remote video images")]),t._v("\n        JCMediaDeviceVideoCanvas "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("localCanvas "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("item startSelfVideo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("JCMediaDeviceRenderFullScreen"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"answer-a-call"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#answer-a-call"}},[t._v("#")]),t._v(" Answer a call")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("After the caller initiates the call successfully, the called party\nwill receive the\n"),s("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Protocols/JCCallCallback.html#//api/name/onCallItemAdd:"}},[t._v("onCallItemAdd")]),t._v("\ncallback. At this time, the video and direction properties of the\n"),s("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Classes/JCCallItem.html"}},[t._v("JCCallItem")]),t._v("\nobject in the callback can be used to determine whether it is a\nvideo call or a voice call, so as to make corresponding processing:")],1),t._v(" "),s("div",{staticClass:"language-objectivec extra-class"},[s("pre",{pre:!0,attrs:{class:"language-objectivec"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("onCallItemAdd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("JCCallItem"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" __nonnull"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("item "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// If it is a video call and is ringing")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("direction "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" JCCallDirectionIn "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("video"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// 2. Make corresponding processing, such as "ringing" on the interface')]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("Call\n"),s("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Classes/JCCall.html#//api/name/answer:video:"}},[t._v("answer")]),t._v("\nto answer the call, "),s("strong",[t._v("the video call can be answered by voice or\nvideo")]),t._v(":")],1),t._v(" "),s("div",{staticClass:"language-objectivec extra-class"},[s("pre",{pre:!0,attrs:{class:"language-objectivec"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Answer the call")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("call answer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("item video"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("true"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])]),t._v(" "),s("p",[t._v("After the call is answered, the call status changes to\nJCCallStateConnecting.")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("If you want to reject the call at this time, you can go directly to the\nhang up part. After calling the hang up interface, the call state\nbecomes JCCallStateCanceled.")])]),t._v(" "),s("h2",{attrs:{id:"create-remote-video-images"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#create-remote-video-images"}},[t._v("#")]),t._v(" Create remote video images")]),t._v(" "),s("p",[t._v("After the called party answers the call, the two parties will establish\na connection. At this time, both the caller and the called party will\nreceive the updated callback of the call (onCallItemUpdate), and the\ncall state will change to the JCCallStateTalking.")]),t._v(" "),s("p",[t._v("Call the\n"),s("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Classes/JCCallItem.html#//api/name/startOtherVideo:"}},[t._v("startOtherVideo")]),t._v("\nin the\n"),s("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Classes/JCCallItem.html"}},[t._v("JCCallItem")]),t._v("\nclass to create a remote video streaming. This method returns a\n"),s("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Classes/JCMediaDeviceVideoCanvas.html"}},[t._v("JCMediaDeviceVideoCanvas")]),t._v("\nobject, which is used to render the video to the canvas and manage the\nrendering method:")],1),t._v(" "),s("div",{staticClass:"language-objectivec extra-class"},[s("pre",{pre:!0,attrs:{class:"language-objectivec"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("onCallItemUpdate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("JCCallItem"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" __nonnull"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("item changeParam"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("JCCallChangeParam "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" __nullable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("changeParam "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    JCMediaDeviceVideoCanvas "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("remoteCanvas"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// If the peer is uploading a video streaming (uploadVideoStreamOther)")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" JCCallStateTalking "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" remoteCanvas "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" nil "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("uploadVideoStreamOther"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Remote video rendering")]),t._v("\n        remoteCanvas "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("item startOtherVideo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("JCMediaDeviceRenderFullScreen"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"hang-up-a-call"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hang-up-a-call"}},[t._v("#")]),t._v(" Hang up a call")]),t._v(" "),s("p",[t._v("Both the calling party and the called party can hang up the call.")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("First call\n"),s("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Classes/JCCall.html#//api/name/getActiveCallItem"}},[t._v("getActiveCallItem")]),t._v("\nto get the currently active call object;")],1)]),t._v(" "),s("li",[s("p",[t._v("After obtaining the current active call object, call\n"),s("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Classes/JCCall.html#//api/name/term:reason:description:"}},[t._v("term")]),t._v("\nto hang up the current active call:")],1),t._v(" "),s("div",{staticClass:"language-objectivec extra-class"},[s("pre",{pre:!0,attrs:{class:"language-objectivec"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1. Get the current active call")]),t._v("\nJCCallItem "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("item "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("call getActiveCallItem"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2. Hang up the current active call")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("call term"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("item reason"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("JCCallReasonNone description"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('@"Caller hangs up"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])]),t._v(" "),s("h2",{attrs:{id:"destroy-local-and-remote-video-images"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#destroy-local-and-remote-video-images"}},[t._v("#")]),t._v(" Destroy local and remote video images")]),t._v(" "),s("p",[t._v("After the call is hung up, the onCallItemRemove callback in\n"),s("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Protocols/JCCallCallback.html"}},[t._v("JCCallCallback")]),t._v("\nwill be triggered, and the call state will change to JCCallStateOk. At\nthis time, you need to call the\n"),s("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Classes/JCCallItem.html#//api/name/stopSelfVideo"}},[t._v("stopSelfVideo")]),t._v("\nand\n"),s("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Classes/JCCallItem.html#//api/name/stopOtherVideo"}},[t._v("stopOtherVideo")]),t._v("\nmethods to destroy the local and remote video images:")],1),t._v(" "),s("div",{staticClass:"language-objectivec extra-class"},[s("pre",{pre:!0,attrs:{class:"language-objectivec"}},[s("code",[t._v("```\n "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("onCallItemRemove"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("JCCallItem"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" __nonnull"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("item reason"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("JCCallReason"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("reason description"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("NSString "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" __nullable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("description "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//The callback of removing the call")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Interface processing")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("localCanvas"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Local video destruction")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("item stopSelfVideo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("remoteCanvas"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Remote video destruction")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("item stopOtherVideo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n```\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);