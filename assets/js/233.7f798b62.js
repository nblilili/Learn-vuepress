(window.webpackJsonp=window.webpackJsonp||[]).push([[233],{1092:function(t,a,e){"use strict";e.r(a);var n=e(29),s=Object(n.a)({},(function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"realize-group-calling"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#realize-group-calling"}},[t._v("#")]),t._v(" Realize Group Calling")]),t._v(" "),n("p",[t._v("This guide introduces how to implement group video calling. The API call\nsequence of group video calling is shown in the figure below:")]),t._v(" "),n("p",[n("img",{attrs:{src:e(367),alt:"../../../../_images_en/multivideoworkflow.png"}})]),t._v(" "),n("h2",{attrs:{id:"initialize"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#initialize"}},[t._v("#")]),t._v(" Initialize")]),t._v(" "),n("p",[t._v("Call "),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Classes/JCMediaDevice.html#//api/name/create:callback:"}},[t._v("JCMediaDevice\ncreate")]),t._v("\nand "),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Classes/JCCall.html#//api/name/create:mediaDevice:callback:"}},[t._v("JCCall\ncreate")]),t._v("\nto Initialize modules needed to implement group calls:")],1),t._v(" "),n("div",{staticClass:"language-objectivec extra-class"},[n("pre",{pre:!0,attrs:{class:"language-objectivec"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//Initialize")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bool"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("initialize "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//1. Media class")]),t._v("\n   JCMediaDevice "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("mediaDevice "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("JCMediaDevice create"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("client callback"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//2. Media channel lass")]),t._v("\n   JCMediaChannel "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("mediaChannel "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("JCMediaChannel create"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("client mediaDevice"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("mediaDevice callback"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" client"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" JCClientStateLogined"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("Among them:")]),t._v(" "),n("ul",[n("li",[t._v("The callback in the JCMediaDevice create is the proxy object of the\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Protocols/JCMediaDeviceCallback.html"}},[t._v("JCMediaDeviceCallback")]),t._v("\nprotocol, which is used to notify the upper layer of media device\nrelated events. Therefore, you need to specify the proxy object of\ncallback first, and then implement the JCMediaDeviceCallback in the\nproxy object.")],1)]),t._v(" "),n("p",[t._v("The main methods in the JCMediaDeviceCallback are as follows:")]),t._v(" "),n("div",{staticClass:"language-objectivec extra-class"},[n("pre",{pre:!0,attrs:{class:"language-objectivec"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//Camera changes")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("onCameraUpdate"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//Audio output changes")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("onAudioOutputTypeChange"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("NSString"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("audioOutputType"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//Sound interruption recovery")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("onAudioInerruptAndResume"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("BOOL"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("interrupt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//Receive the first frame of video data")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("onRenderReceived"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("JCMediaDeviceVideoCanvas"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("canvas"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//Render start")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("onRenderStart"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("JCMediaDeviceVideoCanvas"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("canvas"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("ul",[n("li",[t._v("The callback in the JCMediaChannel create method is the proxy object\nof the\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Protocols/JCMediaChannelCallback.html"}},[t._v("JCMediaChannelCallback")]),t._v("\nprotocol, which is used to notify the relevant events in the channel\nto the upper layer. Therefore, you need to specify the proxy object\nof the callback first, and then implement the JCMediaChannelCallback\nmethod in the proxy object.")],1)]),t._v(" "),n("p",[t._v("The main methods in JCMediaChannel are as follows:")]),t._v(" "),n("div",{staticClass:"language-objectivec extra-class"},[n("pre",{pre:!0,attrs:{class:"language-objectivec"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//The callback of MediaChannel state change")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("onMediaChannelStateChange"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("JCMediaChannelState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("state oldState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("JCMediaChannelState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("oldState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//The callback of joining ChannelReason")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("onJoin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bool"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("result reason"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("JCMediaChannelReason"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("reason channelId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("NSString"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("channelId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//The callback of leaving the ChannelReason")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("onLeave"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("JCMediaChannelReason"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("reason channelId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("NSString"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("channelId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//The callback of channel Stop result")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("onStop"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bool"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("result reason"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("JCMediaChannelReason"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("reason"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//The callback of ParticipantJoin")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("onParticipantJoin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("JCMediaChannelParticipant"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("participant"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//The callback of ParticipantLeft")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("onParticipantLeft"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("JCMediaChannelParticipant"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("participant"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//The callback of ParticipantUpdate")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("onParticipantUpdate"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("JCMediaChannelParticipant"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("participant participantChangeParam"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("JCMediaChannelParticipantChangeParam "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("participantChangeParam"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//The volume change of participants")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("onParticipantVolumeChange"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("JCMediaChannelParticipant"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("participant"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h2",{attrs:{id:"join-a-channel"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#join-a-channel"}},[t._v("#")]),t._v(" Join a channel")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("Call\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Classes/JCMediaChannel.html#//api/name/enableUploadAudioStream:"}},[t._v("enableUploadAudioStream")]),t._v("\nto enable the audio stream:")],1),t._v(" "),n("div",{staticClass:"language-objectivec extra-class"},[n("pre",{pre:!0,attrs:{class:"language-objectivec"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1. Enable the audio stream")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("mediaDeviceChannel enableUploadAudioStream"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("true"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2. Turn on the video stream")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("mediaDeviceChannel enableUploadVIdeoStream"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("true"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),n("li",[n("p",[t._v("Call the\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Classes/JCMediaChannel.html#//api/name/join:joinParam:"}},[t._v("join")]),t._v("\nmethod to join the channel. You need to pass in the following\nparameters in this method:")],1),t._v(" "),n("ul",[n("li",[n("p",[t._v("channelIdOrUri: Channel ID or channel Uri. When uriMode in\nparam is set to true, it means channel Uri, and others mean\nchannel ID. Users with the same channel ID or Uri will enter\nthe same channel.")])]),t._v(" "),n("li",[n("p",[t._v("joinParam, fill in nil if no. See\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Classes/JCMediaChannelJoinParam.html"}},[t._v("JCMediaChannelJoinParam")]),t._v("\nobject for details.")],1)])]),t._v(" "),n("div",{staticClass:"language-objectivec extra-class"},[n("pre",{pre:!0,attrs:{class:"language-objectivec"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Join a channel")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("mediaChannel join"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('@"222"')]),t._v(" joinParam"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("nil"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),n("li",[n("p",[t._v("The\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Protocols/JCMediaChannelCallback.html#//api/name/onJoin:reason:channelId:"}},[t._v("onJoin")]),t._v("\ncallback triggers after joining the channel:")],1),t._v(" "),n("div",{staticClass:"language-objectivec extra-class"},[n("pre",{pre:!0,attrs:{class:"language-objectivec"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// The callback of joining ChannelReason")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("onJoin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bool"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("result reason"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("JCMediaChannelReason"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("reason channelId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("NSString"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("channelId\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Successfully joined")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Failed to join")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),n("h2",{attrs:{id:"create-local-video-images"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#create-local-video-images"}},[t._v("#")]),t._v(" Create local video images")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("After joining the channel, obtain the self object in the channel\nthrough the selfParticipant attribute in\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Classes/JCMediaChannel.html"}},[t._v("JCMediaChannel")]),t._v(":")],1),t._v(" "),n("div",{staticClass:"language-objectivec extra-class"},[n("pre",{pre:!0,attrs:{class:"language-objectivec"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1. Access the memeber objects in the channel")]),t._v("\nJCMediaChannelParticipant "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("participant "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mediaChannel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("selfParticipant"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),n("li",[n("p",[t._v("Call the\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Classes/JCMediaDevice.html#//api/name/startVideo:renderType:"}},[t._v("startVideo")]),t._v("\nmethod in the\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Classes/JCMediaChannelParticipant.html"}},[t._v("JCMediaChannelParticipant")]),t._v("\nclass to open the local video preview. This method returns a\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Classes/JCMediaDeviceVideoCanvas.html"}},[t._v("JCMediaDeviceVideoCanvas")]),t._v("\nobject, which is used to render the video to the canvas and manage\nthe rendering method. (Calling this method will open the camera):")],1),t._v(" "),n("div",{staticClass:"language-objectivec extra-class"},[n("pre",{pre:!0,attrs:{class:"language-objectivec"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2. Open local video preview")]),t._v("\nJCMediaDeviceVideoCanvas "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("localCanvas "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("participant startVideo"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("JCMediaDeviceRenderFullScreen pictureSize"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("JCMediaChannelPictureSizeLarge"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])]),t._v(" "),n("h2",{attrs:{id:"create-remote-video-images"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#create-remote-video-images"}},[t._v("#")]),t._v(" Create remote video images")]),t._v(" "),n("p",[t._v("During a video call, you usually need to see other users. After the\nremote user successfully joins the channel, the\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Protocols/JCMediaChannelCallback.html#//api/name/onParticipantJoin:"}},[t._v("onParticipantJoin")]),t._v("\ncallback will be triggered, which contains the object of the remote\nuser.")],1),t._v(" "),n("p",[t._v("In this callback, call the\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Classes/JCMediaDevice.html#//api/name/startVideo:renderType:"}},[t._v("startVideo")]),t._v("\nmethod in the\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Classes/JCMediaChannelParticipant.html"}},[t._v("JCMediaChannelParticipant")]),t._v("\nclass to set the remote user’s view. Calling this method will return a\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Classes/JCMediaDeviceVideoCanvas.html"}},[t._v("JCMediaDeviceVideoCanvas")]),t._v("\nobject, which is used to render the video to the canvas and manage the\nrendering method:")],1),t._v(" "),n("div",{staticClass:"language-objectivec extra-class"},[n("pre",{pre:!0,attrs:{class:"language-objectivec"}},[n("code",[n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("onParticipantJoin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("JCMediaChannelParticipant"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("participant "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("participant"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("video"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        JCMediaDeviceVideoCanvas "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("remoteCanvas "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("participant startVideo"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("JCMediaDeviceRenderFullScreen pictureSize"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("JCMediaChannelPictureSizeLarge"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("More Steps")]),t._v(" "),n("ul",[n("li",[t._v("Upload a local audio stream")])]),t._v(" "),n("p",[t._v("Since the SDK does not upload local audio streams by default, other\nmembers will not be able to hear your voice.If you want other members in\nthe channel to hear your voice, you need to call the\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Classes/JCMediaChannel.html#//api/name/enableUploadAudioStream:"}},[t._v("enableUploadAudioStream")]),t._v("\nmethod in\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Classes/JCMediaChannel.html"}},[t._v("JCMediaChannel")]),t._v("\nto upload the local audio stream:")],1),t._v(" "),n("div",{staticClass:"language-objectivec extra-class"},[n("pre",{pre:!0,attrs:{class:"language-objectivec"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Send a local audio stream")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("mediaChannel enableUploadAudioStream"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("true"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h2",{attrs:{id:"leave-a-channel"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#leave-a-channel"}},[t._v("#")]),t._v(" Leave a channel")]),t._v(" "),n("p",[t._v("Call the\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Classes/JCMediaChannel.html#//api/name/leave"}},[t._v("leave")]),t._v("\nmethod to leave the current channel:")],1),t._v(" "),n("div",{staticClass:"language-objectivec extra-class"},[n("pre",{pre:!0,attrs:{class:"language-objectivec"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("mediaChannel leave"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("After leaving the channel, they receive the\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Protocols/JCMediaChannelCallback.html#//api/name/onLeave:channelId:"}},[t._v("onLeave")]),t._v("\ncallback, and other members receive the\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Protocols/JCMediaChannelCallback.html#//api/name/onParticipantLeft:"}},[t._v("onParticipantLeft")]),t._v("\ncallback at the same time.")],1),t._v(" "),n("h2",{attrs:{id:"destroy-local-and-remote-video-images"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#destroy-local-and-remote-video-images"}},[t._v("#")]),t._v(" Destroy local and remote video images")]),t._v(" "),n("p",[t._v("After the video is hung up, call\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Classes/JCMediaDevice.html#//api/name/stopVideo:"}},[t._v("stopVideo")]),t._v("\nin the\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Classes/JCMediaChannelParticipant.html"}},[t._v("JCMediaChannelParticipant")]),t._v("\nto destroy local and remote video images:")],1),t._v(" "),n("div",{staticClass:"language-objectivec extra-class"},[n("pre",{pre:!0,attrs:{class:"language-objectivec"}},[n("code",[n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("onLeave"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("JCMediaChannelReason"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("reason channelId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("NSString"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("channelId "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("localCanvas "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" nil"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Destroy local video images")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("participant stopVideo"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("remoteCanvas "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" nil"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Remote video destruction")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("participant stopVideo"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h2",{attrs:{id:"destroy-a-channel"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#destroy-a-channel"}},[t._v("#")]),t._v(" Destroy a channel")]),t._v(" "),n("p",[t._v("If you want to destroy a channel, you can call the following interface,\nand all members will be quit:")]),t._v(" "),n("div",{staticClass:"language-objectivec extra-class"},[n("pre",{pre:!0,attrs:{class:"language-objectivec"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// End a channel")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("mediaChannel stop"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("After the channel is stopped, the member that initiated the termination\nreceives the\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Protocols/JCMediaChannelCallback.html#//api/name/onStop:reason:"}},[t._v("onStop")]),t._v("\ncallback, and other members receive the\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Protocols/JCMediaChannelCallback.html#//api/name/onLeave:channelId:"}},[t._v("onLeave")]),t._v("\ncallback at the same time. Please refer to\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Constants/JCMediaChannelReason.html"}},[t._v("JCMediaChannelReason")]),t._v("\nfor the enumeration value of the reason for failure.")],1),t._v(" "),n("p",[t._v("After stopped the channel, you also need to Call\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Classes/JCMediaDevice.html#//api/name/stopVideo:"}},[t._v("stopVideo")]),t._v("\nin the\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/ios/Classes/JCMediaChannelParticipant.html"}},[t._v("JCMediaChannelParticipant")]),t._v("\nto destroy local and remote video images.")],1)])}),[],!1,null,null,null);a.default=s.exports},367:function(t,a,e){t.exports=e.p+"assets/img/multivideoworkflow.d53c86ce.png"}}]);