(window.webpackJsonp=window.webpackJsonp||[]).push([[245],{1139:function(a,t,e){"use strict";e.r(t);var n=e(29),s=Object(n.a)({},(function(){var a=this,t=a.$createElement,n=a._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[n("h1",{attrs:{id:"realize-live-interactive-streaming"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#realize-live-interactive-streaming"}},[a._v("#")]),a._v(" Realize Live Interactive Streaming")]),a._v(" "),n("p",[a._v("This guide introduces how to implement live interactive voice streaming.\nThe API call sequence of live interactive voice streaming is shown in\nthe figure below:")]),a._v(" "),n("p",[n("img",{attrs:{src:e(375),alt:"../../../../_images_en/multiaudioworkflow.png"}})]),a._v(" "),n("h2",{attrs:{id:"initialize"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#initialize"}},[a._v("#")]),a._v(" Initialize")]),a._v(" "),n("p",[a._v("Extend the\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/windows/C++/html/class_j_c_media_channel_callback.html"}},[a._v("JCMediaChannelCallback")]),a._v("\nobject and\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/windows/C++/html/class_j_c_media_device_callback.html"}},[a._v("JCMediaDeviceCallback")]),a._v("\nobject, and implement the pure virtual functions in these two objects.")],1),a._v(" "),n("div",{staticClass:"language-cpp extra-class"},[n("pre",{pre:!0,attrs:{class:"language-cpp"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("JCManager")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" JCMediaDeviceCallback"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" JCMediaChannelCallback\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//The callback of MediaChannel state change")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("virtual")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("void")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("onMediaChannelStateChange")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("JCMediaChannelState state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" JCMediaChannelState oldState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//The callback of channel property change")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("virtual")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("void")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("onMediaChannelPropertyChange")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("JCMediaChannelPropChangeParam propChangeParam"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//The callback of joining ChannelReason")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("virtual")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("void")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("onJoin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("bool")]),a._v(" result"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" JCMediaChannelReason reason"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("char")]),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v(" channelId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//The callback of leaving ChannelReason")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("virtual")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("void")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("onLeave")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("JCMediaChannelReason reason"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("char")]),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v(" channelId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//The callback of channel Stop result")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("virtual")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("void")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("onStop")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("bool")]),a._v(" result"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" JCMediaChannelReason reason"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//The callback of channel Query result")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("virtual")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("void")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("onQuery")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("int")]),a._v(" operationId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("bool")]),a._v(" result"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" JCMediaChannelReason reason"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" JCMediaChannelQueryInfo"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v(" queryInfo"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//The callback of ParticipantJoin")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("virtual")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("void")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("onParticipantJoin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("JCMediaChannelParticipant"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v(" participant"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//The callback of ParticipantLeft")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("virtual")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("void")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("onParticipantLeft")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("JCMediaChannelParticipant"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v(" participant"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//The callback of ParticipantUpdate")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("virtual")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("void")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("onParticipantUpdate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("JCMediaChannelParticipant"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v(" participant"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" JCMediaChannelParticipant"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("::")]),a._v("ChangeParam changeParam"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//This callback triggers when messages are received in the channel")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("virtual")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("void")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("onMessageReceive")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("char")]),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v(" type"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("char")]),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v(" content"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("char")]),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v(" fromUserId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//The callback of InviteSipUserResult")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("virtual")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("void")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("onInviteSipUserResult")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("int")]),a._v(" operationId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("bool")]),a._v(" result"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" JCMediaChannelReason reason"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//The volume change of Participants")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("virtual")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("void")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("onParticipantVolumeChange")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("JCMediaChannelParticipant"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v(" participant"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//mediaDevice object")]),a._v("\n    JCMediaDevice"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v(" mediaDevice"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//mediaChannel object")]),a._v("\n    JCMediaChannel"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v(" mediaChannel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),n("p",[a._v("Call\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/windows/C++/html/_j_c_media_device_8h.html#a96a10766264f3c12af531b70cb9c9749"}},[a._v("createJCMediaDevice")]),a._v("\nand\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/windows/C++/html/_j_c_call_8h.html#a29320972a659ce8eaf4994576103a62c"}},[a._v("createJCCall")]),a._v("\nto initialize the modules needed for group video calls:")],1),a._v(" "),n("div",{staticClass:"language-cpp extra-class"},[n("pre",{pre:!0,attrs:{class:"language-cpp"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//Initialize")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("bool")]),a._v(" JCManager"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("::")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("initialize")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//1. Media class")]),a._v("\n    mediaDevice "),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("createJCMediaDevice")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("client"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//1. mediaChannel class")]),a._v("\n    mediaChannel "),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("createJCMediaChannel")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("client"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" mediaDevice"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),n("p",[a._v("Among them:")]),a._v(" "),n("ul",[n("li",[n("p",[a._v("This in the JCMediaDevice create method is a derived class of\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/windows/C++/html/class_j_c_media_device_callback.html"}},[a._v("JCMediaDeviceCallback")]),a._v("\n, which is used to notify the upper layer of media device-related\nevents. Therefore, you need to create a derived class of\nJCMediaDeviceCallback, and then implement the pure virtual function\nof JCMediaDeviceCallback in the derived class.")],1)]),a._v(" "),n("li",[n("p",[a._v("This in the JCMediaChannel create method is a derived class of\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/windows/C++/html/class_j_c_media_channel_callback.html"}},[a._v("JCMediaChannelCallback")]),a._v("\n, which is used to notify related events in the channel to the upper\nlayer. Therefore, you need to create a derived class of\nJCMediaChannelCallback, and then implement the pure virtual function\nof JCMediaChannelCallback in the derived class.")],1)])]),a._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[a._v("TIP")]),a._v(" "),n("p",[a._v("The object in the callback can only be used in the callback and cannot\nbe saved. The upper layer can obtain the call object through the\ncorresponding method.")])]),a._v(" "),n("h2",{attrs:{id:"role-setting"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#role-setting"}},[a._v("#")]),a._v(" Role setting")]),a._v(" "),n("p",[a._v("There are two roles for users in live streaming: the host and audience.\nThe audience in the live sreaming can only hear the voice of the host,\nbut cannot talk.")]),a._v(" "),n("p",[a._v("Before joining a channel, you must set the role at first. The host can\nupload local audio and video streams, and the audience can only see the\nimage of the host and hear the voice of the host.")]),a._v(" "),n("p",[a._v("The role value can be customized according to the\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/windows/C++/html/_j_c_media_channel_constants_8h.html#aa5042852bc565ec1e596a7c286ad3c64"}},[a._v("JCMediaChannelCustomRole")]),a._v("\nenumeration value, such as:")],1),a._v(" "),n("div",{staticClass:"language-cpp extra-class"},[n("pre",{pre:!0,attrs:{class:"language-cpp"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//Customize the role of the host according to the CustomState enumeration value")]),a._v("\nJCMediaChannelCustomRole ROLE_BROASCASTER "),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" JCMediaChannelCustomRole0"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//Customize the role of audiences according to the CustomState enumeration value")]),a._v("\nJCMediaChannelCustomRole ROLE_AUDIENCE "),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" JCMediaChannelCustomRole1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),n("p",[a._v("Call\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/windows/C++/html/class_j_c_media_channel.html#a7b6b97e8193f2cf7f2819ec3ca49b813"}},[a._v("setCustomRole")]),a._v("\nto set your own role to enter the channel:")],1),a._v(" "),n("div",{staticClass:"language-cpp extra-class"},[n("pre",{pre:!0,attrs:{class:"language-cpp"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// Set the role; the value of participant (the second parameter) is null, which means that you set your own role")]),a._v("\nJCManager"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("::")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("shared")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("->")]),a._v("mediaChannel"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("->")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("setCustomRole")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("ROLE_BROASCASTER"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[a._v("NULL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[a._v("TIP")]),a._v(" "),n("p",[a._v("After joining a channel, if you want to switch user roles, you can also\ncall the setCustomRole method.")])]),a._v(" "),n("h2",{attrs:{id:"join-a-channel"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#join-a-channel"}},[a._v("#")]),a._v(" Join a channel")]),a._v(" "),n("p",[a._v("Before joining a channel, you need to control the upload of audio and\nvideo streams according to the role of the member.In the live\ninteractive voice streaming, the host needs to upload the local audio\nstream, but the audience does not.")]),a._v(" "),n("ol",[n("li",[n("p",[a._v("Call\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/windows/C++/html/class_j_c_media_channel.html#a2b08d87b38fe2fd7a394e2786241cc4c"}},[a._v("enableUploadAudioStream")]),a._v("\nto enable audio streaming:")],1),a._v(" "),n("div",{staticClass:"language-cpp extra-class"},[n("pre",{pre:!0,attrs:{class:"language-cpp"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//Upload local audio and video streams according to roles")]),a._v("\nJCManager"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("::")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("shared")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("->")]),a._v("mediaChannel"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("->")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("enableUploadVideoStream")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("customRole "),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("==")]),a._v(" ROLE_BROASCASTER"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])])])]),a._v(" "),n("p",[a._v("Since the SDK uploads video streams by default, you need to turn off the\nuploading video stream symbol before joining a channel for live\ninteractive voice streamingSince the SDK uploads video streams by\ndefault, you need to turn off the uploading video stream logo before\njoining a channel for live interactive voice streaming:")]),a._v(" "),n("div",{staticClass:"language-cpp extra-class"},[n("pre",{pre:!0,attrs:{class:"language-cpp"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//Turn off uploading video stream")]),a._v("\nJCManager"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("::")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("shared")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("->")]),a._v("mediaChannel"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("->")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("enableUploadAudioStream")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[a._v("TIP")]),a._v(" "),n("ul",[n("li",[n("p",[a._v("These two interfaces can be called before or after joining a\nchannel.")])]),a._v(" "),n("li",[n("p",[a._v("If called before joining a channel, "),n("strong",[a._v("it will only pre-open or close\nthe “upload audio and video stream” symbol, and not send data")]),a._v(".\nAfter joining a channel, the server will determine whether to upload\naudio and video according to the value passed in the parameter.")])]),a._v(" "),n("li",[n("p",[a._v("If the value passed in the enableUploadVideoStream method is false\nbefore joining a channel, the live interactive voice streaming mode\nwill be automatically turned on after joining a channel.")])]),a._v(" "),n("li",[n("p",[a._v("In addition, calling the enableUploadVideoStream method to send\nlocal video stream data according to whether the camera has been\nopened.")])]),a._v(" "),n("li",[n("p",[a._v("After the interface is called, when joining a channel, other members\nin the channel will receive the status change callback\n(onParticipantUpdate) of the member “whether to upload audio and\nvideo”.")])])])]),a._v(" "),n("ol",{attrs:{start:"2"}},[n("li",[n("p",[a._v("After the role is set, call the\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/windows/C++/html/class_j_c_media_channel.html#acfdb1da52955cf8b01d95527eb28890b"}},[a._v("join")]),a._v("\nmethod to create and join a channel. You need to pass in the\nfollowing parameters in the method:")],1),a._v(" "),n("ul",[n("li",[n("p",[a._v("channelIdOrUri: Channel ID or channel Uri. When uriMode in\nparam is set to true, it means channel Uri, and others mean\nchannel ID. Users with the same channel ID or Uri will enter\nthe same channel.")])]),a._v(" "),n("li",[n("p",[a._v("joinParam: Join parameters, if not, fill in NULL. See\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/windows/C++/html/class_j_c_media_channel_join_param.html"}},[a._v("JCMediaChannelJoinParam")]),a._v("\nobject for details.")],1)])]),a._v(" "),n("div",{staticClass:"language-cpp extra-class"},[n("pre",{pre:!0,attrs:{class:"language-cpp"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// Join a channel")]),a._v("\nJCManager"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("::")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("shared")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("->")]),a._v("mediaChannel"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("->")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("join")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[a._v('"channel ID"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[a._v("NULL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])])]),a._v(" "),n("li",[n("p",[a._v("The\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/windows/C++/html/class_j_c_media_channel_callback.html#a430bd78b28e189ee3c9564ddb7db213d"}},[a._v("onJoin")]),a._v("\ncallback triggers after joining the channel:")],1),a._v(" "),n("div",{staticClass:"language-cpp extra-class"},[n("pre",{pre:!0,attrs:{class:"language-cpp"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// The callback of joining ChannelReason")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("void")]),a._v(" JCManager"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("::")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("onJoin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("bool")]),a._v(" result"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" JCMediaChannelReason reason"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("char")]),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v(" channelId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("result"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//the logic of successful joining in")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("else")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//the logic of failed joining in")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])])])]),a._v(" "),n("h2",{attrs:{id:"leave-a-channel"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#leave-a-channel"}},[a._v("#")]),a._v(" Leave a channel")]),a._v(" "),n("p",[a._v("Call the\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/windows/C++/html/class_j_c_media_channel.html#a93c19137044fec1568f73f1f6dbfee84"}},[a._v("leave")]),a._v("\nmethod to leave the current channel:")],1),a._v(" "),n("div",{staticClass:"language-cpp extra-class"},[n("pre",{pre:!0,attrs:{class:"language-cpp"}},[n("code",[a._v("JCManager"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("::")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("shared")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("->")]),a._v("mediaChannel"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("->")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("leave")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),n("p",[a._v("After leaving the channel, they receive the\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/windows/C++/html/class_j_c_media_channel_callback.html#a18bc4fae89f0d56fb849075f1603ac71"}},[a._v("onLeave")]),a._v("\ncallback, and other members receive the\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/windows/C++/html/class_j_c_media_channel_callback.html#a5888058878f3aaa382b3ede94228a6e8"}},[a._v("onParticipantLeft")]),a._v("\ncallback at the same time:")],1),a._v(" "),n("div",{staticClass:"language-cpp extra-class"},[n("pre",{pre:!0,attrs:{class:"language-cpp"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// The callback of leaving the channel")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("void")]),a._v(" JCManager"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("::")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("onLeave")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("JCMediaChannelReason reason"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("char")]),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v(" channelId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//The logic of leaving a channel")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),n("h2",{attrs:{id:"destroy-a-channel"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#destroy-a-channel"}},[a._v("#")]),a._v(" Destroy a channel")]),a._v(" "),n("p",[a._v("If you want to destroy a channel, you can call the following interface,\nand all members will be quit.")]),a._v(" "),n("div",{staticClass:"language-cpp extra-class"},[n("pre",{pre:!0,attrs:{class:"language-cpp"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// End a channel")]),a._v("\nJCManager"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("::")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("shared")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("->")]),a._v("mediaChannel"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("->")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("stop")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),n("p",[a._v("After the channel is stopped, the member that initiated the termination\nreceives the\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/windows/C++/html/class_j_c_media_channel_callback.html#a61a1d5a81563d34f80e70541a114a74a"}},[a._v("onStop")]),a._v("\ncallback, and other members receive the\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/windows/C++/html/class_j_c_media_channel_callback.html#a18bc4fae89f0d56fb849075f1603ac71"}},[a._v("onLeave")]),a._v("\ncallback at the same time. Please refer to\n"),n("RouterLink",{attrs:{to:"/portal/reference/V2.1/windows/C++/html/_j_c_media_channel_constants_8h.html#a24a2154e4bb2db63c75b31cd2b021fc3"}},[a._v("JCMediaChannelReason")]),a._v("\nfor the enumeration value of the reason for failure.")],1),a._v(" "),n("div",{staticClass:"language-cpp extra-class"},[n("pre",{pre:!0,attrs:{class:"language-cpp"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("void")]),a._v(" JCManager"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("::")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("onStop")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("bool")]),a._v(" result"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" JCMediaChannelReason reason"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//The processing of ending a channel")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])])])}),[],!1,null,null,null);t.default=s.exports},375:function(a,t,e){a.exports=e.p+"assets/img/multiaudioworkflow.82162872.png"}}]);