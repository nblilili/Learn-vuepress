(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{368:function(t,e,a){t.exports=a.p+"assets/img/macdyliblist.ea5c36d8.png"},369:function(t,e,a){t.exports=a.p+"assets/img/sandboxset.e2d787cc.png"},370:function(t,e,a){t.exports=a.p+"assets/img/hardrunset.9488e88d.png"},647:function(t,e,a){"use strict";a.r(e);var r=a(29),s=Object(r.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"准备开发环境"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#准备开发环境"}},[t._v("#")]),t._v(" 准备开发环境")]),t._v(" "),r("p",[t._v("本章将介绍如何将 SDK 集成到您自己创建的项目中。")]),t._v(" "),r("h2",{attrs:{id:"前提条件"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#前提条件"}},[t._v("#")]),t._v(" 前提条件")]),t._v(" "),r("ul",[r("li",[r("p",[t._v("支持 macOS 10.10 或以上版本的 macOS 设备")])]),t._v(" "),r("li",[r("p",[t._v("有效的菊风开发者账号（"),r("a",{attrs:{href:"http://developer.juphoon.com/signup",target:"_blank",rel:"noopener noreferrer"}},[t._v("免费注册"),r("OutboundLink")],1),t._v(" ）")])]),t._v(" "),r("li",[r("p",[t._v("有效的菊风 "),r("a",{attrs:{href:"/cn/document/V2.1/create-application.php"}},[t._v("AppKey")])])])]),t._v(" "),r("h2",{attrs:{id:"创建-macos-项目"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#创建-macos-项目"}},[t._v("#")]),t._v(" 创建 macOS 项目")]),t._v(" "),r("p",[t._v("参考以下步骤创建一个 macOS 项目。若已有 macOS 项目，可以直接查看集成 JC SDK。")]),t._v(" "),r("ul",[r("li",[r("p",[t._v("打开 "),r("strong",[t._v("Xcode")]),t._v(" 并点击 "),r("strong",[t._v("Create a new Xcode project")]),t._v("。")])]),t._v(" "),r("li",[r("p",[t._v("选择项目类型为 "),r("strong",[t._v("Cocoa App")]),t._v("，并点击 "),r("strong",[t._v("Next")]),t._v("。")])]),t._v(" "),r("li",[r("p",[t._v("输入项目信息，如项目名称、开发团队信息、组织名称和语言，并点击 "),r("strong",[t._v("Next")]),t._v("。")])])]),t._v(" "),r("div",{staticClass:"custom-block tip"},[r("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),r("p",[t._v("如果您没有添加过开发团队信息，点击 "),r("strong",[t._v("Xcode \\Preferences… \\Accounts")]),t._v("，点击左下角加号并按照屏幕提示登入\nApple ID，完成后即可选择您的账户作为开发团队。")])]),t._v(" "),r("ul",[r("li",[r("p",[t._v("选择项目存储路径，并点击 "),r("strong",[t._v("Create")]),t._v("。")])]),t._v(" "),r("li",[r("p",[t._v("进入 "),r("strong",[t._v("TARGETS \\Project Name \\Signing & Capabilities")]),t._v(" 菜单，勾选\n"),r("strong",[t._v("Automatically manage signing")]),t._v("。")])])]),t._v(" "),r("h2",{attrs:{id:"集成-sdk"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#集成-sdk"}},[t._v("#")]),t._v(" 集成 SDK")]),t._v(" "),r("p",[t._v("mac 端使用动态库集成 SDK。")]),t._v(" "),r("ol",[r("li",[r("p",[t._v("解压并打开下载的 JC SDK 动态库，在 sdk 文件目录下包含 JCSDKOC.framework、include 和 lib\n三个文件夹。")])]),t._v(" "),r("li",[r("p",[t._v("将 "),r("strong",[t._v("sdk")]),t._v(" 文件夹拷贝到您工程所在的目录下。")])]),t._v(" "),r("li",[r("p",[t._v("打开 Xcode，进入 "),r("strong",[t._v("TARGETS \\Project Name \\General")]),t._v(" ，在 Embedded\nBinaries 一栏，点击 "),r("strong",[t._v("+")]),t._v(" 符号，然后导入 JCSDK 文件夹下的 JCSDKOC.framework。")])]),t._v(" "),r("li",[r("p",[t._v("继续点击 "),r("strong",[t._v("+")]),t._v(" 符号，导入如下系统依赖的库。")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("- AudioToolbox.framework\n- VideoToolBox.framework\n- AVFoundation.framework\n- CFNetwork.framework\n- CoreMedia.framework\n- CoreVideo.framework\n")])])]),r("p",[t._v("导入完后的效果如下图：")]),t._v(" "),r("p",[r("img",{attrs:{src:a(368),alt:"../../../../_images/macdyliblist.png"}})])]),t._v(" "),r("li",[r("p",[t._v("点击 Build Settings，找到 Search Paths，设置 Framework Search Paths：")])])]),t._v(" "),r("ul",[r("li",[r("p",[t._v("Framework Search Paths："),r("code",[t._v("$(PROJECT_DIR)/../sdk")])])]),t._v(" "),r("li",[r("p",[t._v("Header Search Paths："),r("code",[t._v("$(PROJECT_DIR)/../sdk/include")])])]),t._v(" "),r("li",[r("p",[t._v("Library Search Paths："),r("code",[t._v("$(PROJECT_DIR)/../sdk/lib/ios")])])])]),t._v(" "),r("div",{staticClass:"custom-block tip"},[r("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),r("p",[t._v("在完成第 1 步导入 JCSDKOC.framework 和两个 .dylib 文件后，Xcode 会自动生成该路径，如果 Xcode\n没有自动生成路径，用户要根据 "),r("code",[t._v("JCSDKOC.framework")]),t._v(" 、"),r("code",[t._v("include")]),t._v(" 和 "),r("code",[t._v("lib")]),t._v("\n文件所在目录，手动设置路径。")])]),t._v(" "),r("ol",{attrs:{start:"6"}},[r("li",[r("p",[t._v("进入工程中的 "),r("strong",[t._v("Target \\Build Settings \\Other Linker Flags")]),t._v("，在此项中添加\n-ObjC。")])]),t._v(" "),r("li",[r("p",[t._v("点击 Build Settings，找到 Preprocessor Macros，在右侧输入\nZPLATFORM=ZPLATFORM_OSX。")])])]),t._v(" "),r("h2",{attrs:{id:"添加项目权限"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#添加项目权限"}},[t._v("#")]),t._v(" 添加项目权限")]),t._v(" "),r("ol",[r("li",[r("p",[t._v("若您的项目已启用 App Sandbox 或 Hardened Runtime 设置，则需勾选如下内容，获取相应的设备权限：")]),t._v(" "),r("p",[r("img",{attrs:{src:a(369),alt:"../../../../_images/sandboxset.png"}}),t._v(" "),r("img",{attrs:{src:a(370),alt:"../../../../_images/hardrunset.png"}})]),t._v(" "),r("div",{staticClass:"custom-block tip"},[r("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),r("p",[t._v("根据 Apple 官方要求：")]),t._v(" "),r("ul",[r("li",[r("p",[t._v("对于在 Mac App Store 发布的软件，需要启用 App Sandbox 设置。详见 "),r("a",{attrs:{href:"https://developer.apple.com/app-sandboxing/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Apple\n官方声明"),r("OutboundLink")],1),t._v("。")])]),t._v(" "),r("li",[r("p",[t._v("对于不在 Mac App Store 发布的软件，需要启用 Hardened Runtime 设置。详见 "),r("a",{attrs:{href:"https://developer.apple.com/news/?id=09032019a",target:"_blank",rel:"noopener noreferrer"}},[t._v("Apple\n官方声明"),r("OutboundLink")],1),t._v("。")])]),t._v(" "),r("li",[r("p",[t._v("Hardened Runtime 设置中的 Library Validation 会阻止 app\n加载框架、插件或库，除非框架、插件或库是由 Apple 或是与\napp 相同的团队 ID 签名的。当遇到需要取消该安全限制的场景（例如无法枚举到第三方虚拟摄像头）时，请勾选\nHardened Runtime -\\Runtime Exceptions -\\Disable Library\nValidation。")])])])])]),t._v(" "),r("li",[r("p",[t._v("在工程的 info.plist 中添加如下键值:")])])]),t._v(" "),r("table",{staticStyle:{width:"99%"}},[r("colgroup",[r("col",{staticStyle:{width:"33%"}}),t._v(" "),r("col",{staticStyle:{width:"33%"}}),t._v(" "),r("col",{staticStyle:{width:"33%"}})]),t._v(" "),r("thead",[r("tr",{staticClass:"header"},[r("th",[r("p",[t._v("Key")])]),t._v(" "),r("th",[r("p",[t._v("Type")])]),t._v(" "),r("th",[r("p",[t._v("Value")])])])]),t._v(" "),r("tbody",[r("tr",{staticClass:"odd"},[r("td",[r("p",[t._v("Privacy - Microphone Usage Description")])]),t._v(" "),r("td",[r("p",[t._v("String")])]),t._v(" "),r("td",[r("p",[t._v("使用麦克风的目的，如语音通话。")])])]),t._v(" "),r("tr",{staticClass:"even"},[r("td",[r("p",[t._v("Privacy - Camera Usage Description")])]),t._v(" "),r("td",[r("p",[t._v("String")])]),t._v(" "),r("td",[r("p",[t._v("使用摄像头的目的，如视频通话。")])])])])])])}),[],!1,null,null,null);e.default=s.exports}}]);